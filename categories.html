---
layout: default
title: Категории
permalink: /categories/
---

<div class="container">

  <header class="page-header">
    <h1 class="page-title">Категории</h1>
    <p class="page-subtitle">
      Навигация по статьям энциклопедии
    </p>
  </header>

  <!-- TOC -->
  <details class="toc" open>
    <summary class="toc-toggle">Содержание</summary>
    <nav class="toc-nav">
      <ul>
        {% for category in site.data.categories %}
          {% assign posts = site.posts | where_exp: "p", "p.categories contains category.id" %}
          {% if posts.size > 0 %}
            <li>
              <a href="#{{ category.id }}">
                {{ category.name }}
              </a>
            </li>
          {% endif %}
        {% endfor %}
      </ul>
    </nav>
  </details>

  <!-- CATEGORIES -->
  <div class="categories-grid">

    {% for category in site.data.categories %}
      {% assign posts = site.posts | where_exp: "p", "p.categories contains category.id" %}
      {% if posts.size > 0 %}

        <details id="{{ category.id }}" class="category-card" open>

          <summary class="category-header">
            <span class="category-title">
              {{ category.name }}
            </span>

            <span class="category-count">
              ({{ posts.size }})
            </span>
          </summary>

          {% if category.description %}
            <div class="category-description">
              {{ category.description }}
            </div>
          {% endif %}

          <ul class="article-list">
            {% for post in posts %}
              <li>
                <a href="{{ post.url | relative_url }}">
                  {{ post.title }}
                </a>
              </li>
            {% endfor %}
          </ul>

        </details>

      {% endif %}
    {% endfor %}

  </div>

</div>

<style>
/* =======================
   GRID
   ======================= */

.categories-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(420px, 1fr));
  gap: var(--space-xl);
  margin-top: var(--space-xl);
}

/* =======================
   CARD
   ======================= */

.category-card {
  border: 1px solid var(--color-border);
  background: var(--color-surface);
  padding: var(--space-xl);
}

/* =======================
   HEADER
   ======================= */

.category-header {
  list-style: none;
  display: flex;
  align-items: baseline;
  gap: var(--space-sm);
  margin-bottom: var(--space-sm);
}

.category-header::-webkit-details-marker {
  display: none;
}

.category-title {
  font-family: var(--font-serif);
  font-size: 1.5rem;
  font-weight: 600;
}

.category-count {
  font-size: .9rem;
  color: var(--color-text-muted);
}

/* =======================
   DESCRIPTION
   ======================= */

.category-description {
  color: var(--color-text-secondary);
  font-size: .95rem;
  margin-bottom: var(--space-md);
}

/* =======================
   ARTICLE LIST
   ======================= */

.article-list {
  column-count: 2;
  column-gap: var(--space-xl);
  padding-left: var(--space-xl);
}

@media (max-width: 600px) {
  .article-list {
    column-count: 1;
  }
}

/* =======================
   MOBILE COLLAPSE ONLY
   ======================= */

@media (min-width: 901px) {
  /* на десктопе summary — просто заголовок */
  .category-card {
    pointer-events: none;
  }

  .category-card > * {
    pointer-events: auto;
  }

  .category-header {
    cursor: default;
  }
}

@media (max-width: 900px) {
  .category-header {
    cursor: pointer;
  }

  .category-header::after {
    content: "▾";
    margin-left: auto;
    font-size: .8rem;
    color: var(--color-text-muted);
  }

  details:not([open]) .category-header::after {
    transform: rotate(-90deg);
  }
}
</style>
