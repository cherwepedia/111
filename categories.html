---
layout: default
title: Категории
permalink: /categories/
---
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function(m,e,t,r,i,k,a){
    m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();
    for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
    k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
})(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105469789', 'ym');

ym(105469789, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105469789" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<div class="homepage-content">
  <div class="homepage-header">
    <h1 class="site-title">Червепедия</h1>
    <p class="site-description">Энциклопедия Черветреда. Тут ты узнаешь только правду.</p>
  </div>

  <div class="categories-section">
    {% assign sorted_categories = site.categories | sort %}
    {% for category in site.data.categories %}
      <div class="category-block" id="category-{{ category.slug }}">
        <div class="category-header" onclick="toggleCategory('{{ category.slug }}')">
          <h2>{{ category.name }}</h2>
          <span class="toggle-icon" id="icon-{{ category.slug }}">{% if category.slug == 'люди' %}▼{% else %}▶{% endif %}</span>
        </div>
        <div class="category-articles" id="articles-{{ category.slug }}" style="{% if category.slug != 'люди' %}display: none;{% endif %}">
          {% assign category_posts = site.posts | where_exp: "post", "post.categories contains category.name" | sort: "title" %}
          {% if category_posts.size > 0 %}
            <ul class="article-list">
              {% for post in category_posts %}
                <li itemscope itemtype="https://schema.org/Article">
                  <a href="{{ post.url | relative_url }}" itemprop="url">
                    <span itemprop="headline">{{ post.title }}</span>
                  </a>
                  {% if post.image %}
                    <meta itemprop="image" content="{{ post.image | absolute_url }}">
                  {% endif %}
                </li>
              {% endfor %}
            </ul>
          {% else %}
            <p class="no-articles">Статей пока нет</p>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<div class="container">

  <header class="page-header">
    <h1 class="page-title">Категории</h1>
    <p class="page-subtitle">
      Навигация по статьям Червепедии
    </p>
  </header>

  {%- comment -%}
  =====================
  TOC — КАК В СТАТЬЕ
  =====================
  {%- endcomment -%}

  <details class="toc" open>
    <summary class="toc-toggle">Содержание</summary>
    <nav class="toc-nav">
      <ul>
        {% for category in site.data.categories %}
          {% assign posts = site.posts | where_exp: "p", "p.categories contains category.id" %}
          {% if posts.size > 0 %}
            <li>
              <a href="#{{ category.id }}">
                {{ category.name }}
              </a>
            </li>
          {% endif %}
        {% endfor %}
      </ul>
    </nav>
  </details>

  {%- comment -%}
  =====================
  КАТЕГОРИИ В КАРТОЧКАХ
  =====================
  {%- endcomment -%}

  <div class="categories-grid">

    {% for category in site.data.categories %}
      {% assign posts = site.posts | where_exp: "p", "p.categories contains category.id" %}
      {% if posts.size > 0 %}

        <section id="{{ category.id }}" class="category-card">

          <h2 class="category-title">
            {{ category.name }}
            <span class="category-count">
              ({{ posts.size }})
            </span>
          </h2>

          {% if category.description %}
            <div class="category-description">
              {{ category.description }}
            </div>
          {% endif %}

          <ul class="article-list">
            {% for post in posts %}
              <li>
                <a href="{{ post.url | relative_url }}">
                  {{ post.title }}
                </a>
              </li>
            {% endfor %}
          </ul>

        </section>

      {% endif %}
    {% endfor %}

  </div>

</div>

<style>
/* =======================
   GRID
   ======================= */

.categories-grid {
  display: grid;
  grid-template-columns: 1fr; /* ВСЕГДА вертикально */
  gap: var(--space-xl);
  margin-top: var(--space-xl);
  width: 100%;
}

/* =======================
   CATEGORY CARD
   ======================= */

.category-card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  padding: var(--space-xl);
}

/* =======================
   TITLE
   ======================= */

.category-title {
  font-family: var(--font-serif);
  font-size: 1.5rem;
  font-weight: 600;
  margin-bottom: var(--space-sm);
}

.category-count {
  font-size: 0.9rem;
  color: var(--color-text-muted);
  font-weight: 400;
}

/* =======================
   DESCRIPTION
   ======================= */

.category-description {
  color: var(--color-text-secondary);
  font-size: 0.95rem;
  margin-bottom: var(--space-md);
}

/* =======================
   ARTICLE LIST
   ======================= */

.article-list {
  column-count: 2;
  column-gap: var(--space-xl);
  padding-left: var(--space-xl);
}

@media (max-width: 600px) {
  .article-list {
    column-count: 1;
  }
}

.article-list li {
  break-inside: avoid;
  margin-bottom: .35rem;
}

.article-list a {
  color: var(--color-link);
  text-decoration: none;
}

.article-list a:hover {
  text-decoration: underline;
}
</style>
